<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Attendance Management</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" type="image/x-icon" href="logo.jpg">
    <!-- Bootstrap -->
    <link href="assets/bootstrap/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="assets/icon/font-awesome.min.css" rel="stylesheet">
    <!-- PNotify -->
    <link href="assets/vendors/pnotify/dist/pnotify.css" media="all" rel="stylesheet" type="text/css" />
    <link href="assets/vendors/pnotify/dist/pnotify.buttons.css" media="all" rel="stylesheet" type="text/css" />
    <link href="assets/vendors/pnotify/dist/pnotify.nonblock.css" media="all" rel="stylesheet" type="text/css" />
    <!--Date picker-->
    <link href="assets/vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
    <!-- jQuery custom content scroller -->
    <link href="assets/vendors/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
    <!--Custom Theme Style-->
    <link href="assets/css/custom.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="assets/vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
    <link href="assets/vendors/iCheck/skins/flat/green.css" rel="stylesheet">
    <!-- include stylesheet -->
</head>

<body class="nav-md login">
    <app-component></app-component>
    <!-- JQuery -->
    <script src="assets/vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="assets/bootstrap/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="assets/vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="assets/vendors/nprogress/nprogress.js"></script>
    <!-- iCheck -->
    <script src="assets/vendors/iCheck/icheck.min.js"></script>
    <!-- PNotify -->
    <script src="assets/vendors/pnotify/dist/pnotify.js"></script>
    <script src="assets/vendors/pnotify/dist/pnotify.buttons.js"></script>
    <script src="assets/vendors/pnotify/dist/pnotify.nonblock.js"></script>
    <script src="assets/vendors/pnotify/dist/pnotify.desktop.js"></script>
    <!-- Datepicker -->
    <script src="assets/vendors/moment/moment.js"></script>
    <script src="assets/vendors/bootstrap-daterangepicker/daterangepicker.js"></script>
    <!--autosize-->
    <script src="assets/vendors/autosize/dist/autosize.min.js"></script>
    <!-- jQuery custom content scroller -->
    <script src="assets/vendors/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>

    <!-- Custom Theme Scripts -->
    <script src="assets/js/custom.js"></script>
    <!-- include script -->

    <script type="text/javascript">
        var uploadToImgur = function (){
            var formData = new FormData();

            formData.append("image", $("[name='uploads']")[0].files[0]);

            $.ajax({
                url: "https://api.imgur.com/3/upload",
                type: "POST",
                datatype: "json",
                data: formData,
                processData: false,
                contentType: false,
                success: function(data) {
                    if(data.data != null){
                        console.log("your picture here: "+ data.data.link);
                        saveMyAvatar(data.data.link);
                    }
                },
                error: function(data) {
                    console.log("Upload to imgur.com fail");
                },
                beforeSend: function (xhr) {
                xhr.setRequestHeader("Authorization", "Client-ID 56f531f985863ea");
            }}); 
        }

            

        var saveMyAvatar = function (link){
            var data = {
                link: link
            };

            $.ajax({
                url: "",
                type: "POST",
                datatype: "json",
                data: data,
                processData: false,
                contentType: false,
                success: function(data) {
                    console.log(data);
                },
                error: function(data) {
                    console.log("Upload to server fail");
                }
            });       
        }

        var onEditProfilePic = function (input){
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                
                reader.onload = function (e) {
                console.log(e.target);
                    $('#profilePic').attr('src', e.target.result);
                }
                
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</body>
</html>
